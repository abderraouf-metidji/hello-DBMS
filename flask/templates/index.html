{% extends 'base.html' %}
{% block content %}
    <h1>{% block title %} Dashboard {% endblock %}</h1>
    {% for post in posts %}
        <a href="#">
            <h2>{{ post.title }}</h2>
        </a>
        <span class="badge badge-primary">{{ post['created'] }}</span>
        <hr>
    {% endfor %}
    <div>
        <h3> Project context</h3>
        <p>This project revolves around the analysis and study of pollution and energy production for multiple countries and regions in the world. The goal of this project is to discuss the different types of energy production, what they imply in terms of pollution and the consequences. We'll also be able to discuss the countries that pollute the most, same for the regions.</p>
    </div>
    <div class="row">
        <div class="col-md-6">
            <h2>Top 10 Countries by Coal Consumption</h2>
            <table class="table">
                <tr>
                    <th class="text-center">Country</th>
                    <th class="text-center">Coal %</th>
                </tr>
                {% for data in coal_data %}
                    <tr>
                        <td class="text-center">{{ data[1] }}</td>
                        <td class="text-center">{{ data[2] }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        <div class="col-md-6">
            <h2>Top 10 Countries by Gas Consumption</h2>
            <table class="table">
                <tr>
                    <th class="text-center">Country</th>
                    <th class="text-center">Gas %</th>
                </tr>
                {% for data in gas_data %}
                    <tr>
                        <td class="text-center">{{ data[1] }}</td>
                        <td class="text-center">{{ data[3] }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        <div class="col-md-6">
            <h2>Top 10 Countries by Oil Consumption</h2>
            <table class="table">
                <tr>
                    <th class="text-center">Country</th>
                    <th class="text-center">Oil %</th>
                </tr>
                {% for data in oil_data %}
                    <tr>
                        <td class="text-center">{{ data[1] }}</td>
                        <td class="text-center">{{ data[4] }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        <div class="col-md-6">
            <h2>Top 10 Countries by Hydro Consumption</h2>
            <table class="table">
                <tr>
                    <th class="text-center">Country</th>
                    <th class="text-center">Hydro %</th>
                </tr>
                {% for data in hydro_data %}
                    <tr>
                        <td class="text-center">{{ data[1] }}</td>
                        <td class="text-center">{{ data[5] }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        <div class="col-md-6">
            <h2>Top 10 Countries by Renewable Consumption</h2>
            <table class="table">
                <tr>
                    <th class="text-center">Country</th>
                    <th class="text-center">Renewable %</th>
                </tr>
                {% for data in renewable_data %}
                    <tr>
                        <td class="text-center">{{ data[1] }}</td>
                        <td class="text-center">{{ data[6] }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        <div class="col-md-6">
            <h2>Top 10 Countries by Nuclear Consumption</h2>
            <table class="table">
                <tr>
                    <th class="text-center">Country</th>
                    <th class="text-center">Nuclear %</th>
                </tr>
                {% for data in nuclear_data %}
                    <tr>
                        <td class="text-center">{{ data[1] }}</td>
                        <td class="text-center">{{ data[7] }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>
    <h2>Country Sample</h2>
    <table class="table">
        <tr>
            <th class="text-center">Country</th>
            <th class="text-center">Coal</th>
            <th class="text-center">Gas</th>
            <th class="text-center">Oil</th>
            <th class="text-center">Hydro</th>
            <th class="text-center">Renewable</th>
            <th class="text-center">Nuclear</th>
        </tr>
        {% for data in country_sample %}
            <tr>
                <td class="text-center">{{ data[1] }}</td>
                <td class="text-center">{{ data[2] }}</td>
                <td class="text-center">{{ data[3] }}</td>
                <td class="text-center">{{ data[4] }}</td>
                <td class="text-center">{{ data[5] }}</td>
                <td class="text-center">{{ data[6] }}</td>
                <td class="text-center">{{ data[7] }}</td>
            </tr>
        {% endfor %}
    </table>
    <h2>World</h2>
    <table class="table">
        <tr>
            <th class="text-center">Region</th>
            <th class="text-center">Coal</th>
            <th class="text-center">Gas</th>
            <th class="text-center">Oil</th>
            <th class="text-center">Hydro</th>
            <th class="text-center">Renewable</th>
            <th class="text-center">Nuclear</th>
        </tr>
        {% for data in world_sample %}
            <tr>
                <td class="text-center">{{ data[1] }}</td>
                <td class="text-center">{{ data[2] }}</td>
                <td class="text-center">{{ data[3] }}</td>
                <td class="text-center">{{ data[4] }}</td>
                <td class="text-center">{{ data[5] }}</td>
                <td class="text-center">{{ data[6] }}</td>
                <td class="text-center">{{ data[7] }}</td>
            </tr>
        {% endfor %}
    </table>
    <h2>Pollution - Country</h2>
    <table class="table">
        <tr>
            <th class="text-center">Country</th>
            <th class="text-center">Source</th>
            <th class="text-center">%</th>
            <th class="text-center">Emissions</th>
            <th class="text-center">Source</th>
            <th class="text-center">%</th>
            <th class="text-center">Emissions</th>
            <th class="text-center">Source</th>
            <th class="text-center">%</th>
            <th class="text-center">Emissions</th>
            <th class="text-center">Source</th>
            <th class="text-center">%</th>
            <th class="text-center">Emissions</th>
            <th class="text-center">Source</th>
            <th class="text-center">%</th>
            <th class="text-center">Emissions</th>
        </tr>
        {% for country_data in percentage_contributions_country %}
            <tr>
                <td>{{ country_data.country }}</td>
                {% for pollution_data in country_data.pollution_data %}
                    <td>{{ pollution_data.source }}</td>
                    <td>{{ pollution_data.usage_percentage }}</td>
                    <td>{{ pollution_data.pollution }}</td>
                {% endfor %}
            </tr>
        {% endfor %}
    </table>
    <h2>Pollution - World</h2>
    <table class="table">
        <tr>
            <th class="text-center">Region</th>
            <th class="text-center">Source</th>
            <th class="text-center">%</th>
            <th class="text-center">Emissions</th>
            <th class="text-center">Source</th>
            <th class="text-center">%</th>
            <th class="text-center">Emissions</th>
            <th class="text-center">Source</th>
            <th class="text-center">%</th>
            <th class="text-center">Emissions</th>
            <th class="text-center">Source</th>
            <th class="text-center">%</th>
            <th class="text-center">Emissions</th>
            <th class="text-center">Source</th>
            <th class="text-center">%</th>
            <th class="text-center">Emissions</th>
        </tr>
        {% for world_data in percentage_contributions_world %}
            <tr>
                <td>{{ world_data.world }}</td>
                {% for pollution_data in world_data.pollution_data %}
                    <td>{{ pollution_data.source }}</td>
                    <td>{{ pollution_data.usage_percentage }}</td>
                    <td>{{ pollution_data.pollution }}</td>
                {% endfor %}
            </tr>
        {% endfor %}
    </table>
    <form method="POST" action="{{ url_for('selected_country_pollution') }}">
        <label for="selected_country">Select Country:</label>
        <select name="selected_country" id="selected_country">
            {% for data in country_data %}
                <option value="{{ data[1] }}">{{ data[1] }}</option>
            {% endfor %}
        </select>
        <button type="submit">Submit</button>
    </form>    
    <form method="POST" action="{{ url_for('selected_region_pollution') }}">
        <label for="selected_region">Select Region:</label>
        <select name="selected_region" id="selected_region">
            {% for data in world_data %}
                <option value="{{ data[1] }}">{{ data[1] }}</option>
            {% endfor %}
        </select>
        <button type="submit">Submit</button>
    </form>   
    {% if selected_country %}
        <h2>Pollution - {{ selected_country }}</h2>
        <table class="table">
            <tr>
                <th class="text-center">Source</th>
                <th class="text-center">% Utilisation</th>
                <th class="text-center">Emissions gCO2kWh</th>
                <th class="text-center">% of total CO2 Emissions</th>
            </tr>
            {% for pollution_data in selected_country_pollution %}
                <tr>
                    <td>{{ pollution_data.source }}</td>
                    <td>{{ pollution_data.usage_percentage }}</td>
                    <td>{{ pollution_data.pollution }}</td>
                    <td>{{ pollution_data.percentage_of_total_emissions_world }}</td>
                </tr>
            {% endfor %}
        </table>
    {% endif %}
    {% if selected_region %}
    <h2>Pollution - {{ selected_region }}</h2>
    <table class="table">
        <tr>
            <th class="text-center">Source</th>
            <th class="text-center">% Utilisation</th>
            <th class="text-center">Emissions gCO2kWh</th>
            <th class="text-center">% of total CO2 Emissions</th>
        </tr>
        {% for pollution_data in selected_region_pollution %}
            <tr>
                <td>{{ pollution_data.source }}</td>
                <td>{{ pollution_data.usage_percentage }}</td>
                <td>{{ pollution_data.pollution }}</td>
                <td>{{ pollution_data.percentage_of_total_emissions_world }}</td>
            </tr>
        {% endfor %}
    </table>
{% endif %}
{% endblock %}